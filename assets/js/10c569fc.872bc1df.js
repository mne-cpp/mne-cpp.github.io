"use strict";(globalThis.webpackChunkmne_cpp_website=globalThis.webpackChunkmne_cpp_website||[]).push([[6486],{76731(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"manual/tools-process-raw","title":"mne_process_raw","description":"Overview","source":"@site/docs/manual/tools-process-raw.mdx","sourceDirName":"manual","slug":"/manual/tools-process-raw","permalink":"/docs/manual/tools-process-raw","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"mne_process_raw","sidebar_label":"mne_process_raw","sidebar_position":8},"sidebar":"docsSidebar","previous":{"title":"mne_dipole_fit","permalink":"/docs/manual/tools-dipole-fit"},"next":{"title":"mne_edf2fiff","permalink":"/docs/manual/tools-edf2fiff"}}');var s=n(74848),t=n(28453);const d={title:"mne_process_raw",sidebar_label:"mne_process_raw",sidebar_position:8},a="mne_process_raw",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"General",id:"general",level:3},{value:"Input",id:"input",level:3},{value:"Events",id:"events",level:3},{value:"Projection (SSP)",id:"projection-ssp",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Output / Decimation",id:"output--decimation",level:3},{value:"Averaging",id:"averaging",level:3},{value:"Covariance",id:"covariance",level:3},{value:"Description",id:"description",level:2},{value:"Processing Pipeline",id:"processing-pipeline",level:3},{value:"Event Detection",id:"event-detection",level:3},{value:"Description Files for Averaging",id:"description-files-for-averaging",level:3},{value:"Description Files for Covariance Estimation",id:"description-files-for-covariance-estimation",level:3},{value:"Signal-Space Projection (SSP)",id:"signal-space-projection-ssp",level:3},{value:"Filtering and Decimation",id:"filtering-and-decimation",level:3},{value:"Grand Averaging",id:"grand-averaging",level:3},{value:"Examples",id:"examples",level:2},{value:"Detect events and save them",id:"detect-events-and-save-them",level:3},{value:"Band-pass filter and decimate",id:"band-pass-filter-and-decimate",level:3},{value:"Compute averages from a description file",id:"compute-averages-from-a-description-file",level:3},{value:"Compute noise covariance from pre-stimulus baselines",id:"compute-noise-covariance-from-pre-stimulus-baselines",level:3},{value:"Full pipeline with SSP, filtering, and averaging",id:"full-pipeline-with-ssp-filtering-and-averaging",level:3},{value:"Grand average across multiple subjects",id:"grand-average-across-multiple-subjects",level:3},{value:"Create SSP operators from empty-room data",id:"create-ssp-operators-from-empty-room-data",level:3},{value:"Save filtered data with anonymization",id:"save-filtered-data-with-anonymization",level:3},{value:"See Also",id:"see-also",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"mne_process_raw",children:"mne_process_raw"})}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"mne_process_raw"})," is the batch-mode raw data processing tool for MEG/EEG data. It provides a complete offline processing pipeline including filtering, decimation, event detection, epoch-based averaging, noise-covariance matrix estimation, and Signal-Space Projection (SSP) operator creation \u2014 all driven from the command line without a GUI."]}),"\n",(0,s.jsxs)(i.p,{children:["This is a C++ port of the original MNE-C ",(0,s.jsx)(i.code,{children:"mne_process_raw"})," by Matti H\xe4m\xe4l\xe4inen. In the original MNE-C distribution, ",(0,s.jsx)(i.code,{children:"mne_browse_raw"})," (interactive GUI) and ",(0,s.jsx)(i.code,{children:"mne_process_raw"})," (batch mode) were two names for the same binary; when invoked as ",(0,s.jsx)(i.code,{children:"mne_process_raw"}),", no user interface appeared and all operations were controlled through command-line options and description files."]}),"\n",(0,s.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw [options]\n"})}),"\n",(0,s.jsxs)(i.p,{children:["At minimum, one ",(0,s.jsx)(i.code,{children:"--raw"})," file must be specified. All other options are optional and can be combined freely."]}),"\n",(0,s.jsx)(i.h2,{id:"options",children:"Options"}),"\n",(0,s.jsx)(i.h3,{id:"general",children:"General"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--help"})}),(0,s.jsx)(i.td,{children:"Print grouped help and exit"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--version"})}),(0,s.jsx)(i.td,{children:"Print version information and exit"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--cd <dir>"})}),(0,s.jsx)(i.td,{children:"Change working directory before processing"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"input",children:"Input"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--raw <file>"})}),(0,s.jsxs)(i.td,{children:["Raw data file to process ",(0,s.jsx)(i.strong,{children:"(required, repeatable)"}),". When multiple files are given, grand averaging and grand covariance are computed across all files."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--grad <number>"})}),(0,s.jsx)(i.td,{children:"Desired software gradient compensation order (for CTF / 4D data)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--allowmaxshield"})}),(0,s.jsx)(i.td,{children:"Allow loading of unprocessed Elekta MaxShield data"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"events",children:"Events"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--events <file>"})}),(0,s.jsx)(i.td,{children:"Load event list from file (FIFF or text format)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--eventsout <file>"})}),(0,s.jsx)(i.td,{children:"Save detected events to file"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--allevents"})}),(0,s.jsx)(i.td,{children:"Detect all trigger transitions, not just rising edges"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--digtrig <name>"})}),(0,s.jsxs)(i.td,{children:["Digital trigger channel name (default: ",(0,s.jsx)(i.code,{children:"STI 014"}),"). Use underscores for spaces, e.g. ",(0,s.jsx)(i.code,{children:"STI_014"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--digtrigmask <value>"})}),(0,s.jsxs)(i.td,{children:["Bit mask applied to the trigger channel (decimal or ",(0,s.jsx)(i.code,{children:"0x"})," hex)"]})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"projection-ssp",children:"Projection (SSP)"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--proj <file>"})}),(0,s.jsx)(i.td,{children:"Load SSP vectors from file (repeatable)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projon"})}),(0,s.jsx)(i.td,{children:"Activate SSP projections when processing"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projoff"})}),(0,s.jsx)(i.td,{children:"Deactivate SSP projections"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--makeproj"})}),(0,s.jsx)(i.td,{children:"Compute new SSP operators from the data"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projevent <code>"})}),(0,s.jsx)(i.td,{children:"Event code selecting the epochs for SSP computation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projtmin <sec>"})}),(0,s.jsx)(i.td,{children:"Start time of the window for SSP computation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projtmax <sec>"})}),(0,s.jsx)(i.td,{children:"End time of the window for SSP computation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projngrad <n>"})}),(0,s.jsx)(i.td,{children:"Number of gradiometer SSP components (default: 2)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projnmag <n>"})}),(0,s.jsx)(i.td,{children:"Number of magnetometer SSP components (default: 2)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projneeg <n>"})}),(0,s.jsx)(i.td,{children:"Number of EEG SSP components (default: 0)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projgradrej <fT/cm>"})}),(0,s.jsx)(i.td,{children:"Gradiometer rejection threshold for SSP (default: 2000)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projmagrej <fT>"})}),(0,s.jsx)(i.td,{children:"Magnetometer rejection threshold for SSP (default: 3000)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--projeegrej <\xb5V>"})}),(0,s.jsx)(i.td,{children:"EEG rejection threshold for SSP (default: 0)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--saveprojtag <tag>"})}),(0,s.jsx)(i.td,{children:"Tag appended to SSP output filenames"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"filtering",children:"Filtering"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--filtersize <n>"})}),(0,s.jsx)(i.td,{children:"FFT length for the FIR filter (default: 8192)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--highpass <Hz>"})}),(0,s.jsx)(i.td,{children:"High-pass corner frequency"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--lowpass <Hz>"})}),(0,s.jsx)(i.td,{children:"Low-pass corner frequency"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--highpassw <Hz>"})}),(0,s.jsx)(i.td,{children:"High-pass transition bandwidth"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--lowpassw <Hz>"})}),(0,s.jsx)(i.td,{children:"Low-pass transition bandwidth"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--filteroff"})}),(0,s.jsx)(i.td,{children:"Do not filter the data"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"output--decimation",children:"Output / Decimation"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--save <file>"})}),(0,s.jsx)(i.td,{children:"Save processed (filtered, projected) raw data to file"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--decim <factor>"})}),(0,s.jsx)(i.td,{children:"Decimation (down-sampling) factor (default: 1)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--split <MB>"})}),(0,s.jsx)(i.td,{children:"Split output files at this size in megabytes"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--anon"})}),(0,s.jsx)(i.td,{children:"Omit subject information from the output file"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--savehere"})}),(0,s.jsx)(i.td,{children:"Write output to the current directory instead of the raw file's directory"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"averaging",children:"Averaging"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--ave <file>"})}),(0,s.jsx)(i.td,{children:"Off-line averaging description file (repeatable)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--saveavetag <tag>"})}),(0,s.jsx)(i.td,{children:"Tag appended to average output filenames"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--gave <file>"})}),(0,s.jsxs)(i.td,{children:["Grand average output file (used with multiple ",(0,s.jsx)(i.code,{children:"--raw"})," files)"]})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"covariance",children:"Covariance"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--cov <file>"})}),(0,s.jsx)(i.td,{children:"Covariance matrix description file (repeatable)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--savecovtag <tag>"})}),(0,s.jsx)(i.td,{children:"Tag appended to covariance output filenames"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"--gcov <file>"})}),(0,s.jsxs)(i.td,{children:["Grand covariance output file (used with multiple ",(0,s.jsx)(i.code,{children:"--raw"})," files)"]})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"mne_process_raw"})," orchestrates a complete batch processing pipeline for raw MEG/EEG data. Operations are executed in a natural order: the raw file is opened, events are attached or detected, projections are loaded, and then the requested processing steps (filtering, saving, averaging, covariance estimation, SSP computation) are carried out."]}),"\n",(0,s.jsx)(i.h3,{id:"processing-pipeline",children:"Processing Pipeline"}),"\n",(0,s.jsx)(i.p,{children:"The processing pipeline proceeds in the following order for each input file:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Open raw data"})," \u2014 Load the FIFF raw data file and apply gradient compensation if requested."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Attach events"})," \u2014 Load events from an external file or detect them automatically from the digital trigger channel."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Load projections"})," \u2014 Read SSP vectors from external projection files and optionally activate them."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Filter and save"})," \u2014 If ",(0,s.jsx)(i.code,{children:"--save"})," is specified, apply the filter and decimation settings and write the processed raw data to a new file."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Compute averages"})," \u2014 If ",(0,s.jsx)(i.code,{children:"--ave"})," is specified, parse the averaging description file(s) and compute epoch-based averages with artifact rejection."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Compute covariance"})," \u2014 If ",(0,s.jsx)(i.code,{children:"--cov"})," is specified, parse the covariance description file(s) and estimate noise-covariance matrices from the specified baseline epochs."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Compute SSP"})," \u2014 If ",(0,s.jsx)(i.code,{children:"--makeproj"})," is specified, create new signal-space projection operators from the data."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["When multiple ",(0,s.jsx)(i.code,{children:"--raw"})," files are given, the pipeline processes each file independently and then computes grand averages (",(0,s.jsx)(i.code,{children:"--gave"}),") and/or grand covariance matrices (",(0,s.jsx)(i.code,{children:"--gcov"}),") across all files."]}),"\n",(0,s.jsx)(i.h3,{id:"event-detection",children:"Event Detection"}),"\n",(0,s.jsxs)(i.p,{children:["Events are detected from the digital trigger channel (default: ",(0,s.jsx)(i.code,{children:"STI 014"}),"). The trigger channel is scanned for transitions from zero to a nonzero value (rising edges). The event code is taken from the trigger channel value at the transition point."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Use ",(0,s.jsx)(i.code,{children:"--digtrigmask"})," to mask out specific bits (e.g., ",(0,s.jsx)(i.code,{children:"0xFF"})," to consider only the low 8 bits)."]}),"\n",(0,s.jsxs)(i.li,{children:["Use ",(0,s.jsx)(i.code,{children:"--allevents"})," to detect all transitions (not just rising edges), which is useful when trigger lines carry multiple overlapping codes."]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"tip",children:(0,s.jsx)(i.p,{children:"Since the sampling clock and stimulation devices are usually not synchronized, trigger bits may not all transition at the same sample. The event detector automatically handles this by checking subsequent samples for additional transitions."})}),"\n",(0,s.jsx)(i.h3,{id:"description-files-for-averaging",children:"Description Files for Averaging"}),"\n",(0,s.jsxs)(i.p,{children:["The averaging description file (",(0,s.jsx)(i.code,{children:".ave"}),") specifies one or more stimulus categories, each with its own event code, time window, baseline correction, and artifact rejection criteria. The format follows the MNE-C convention:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:'average {\n    name        "Auditory Left"\n    event       1\n    tmin        -0.2\n    tmax        0.5\n    basemin     -0.2\n    basemax     0.0\n    gradReject  3000e-13\n    magReject   4000e-15\n    eegReject   150e-6\n    eogReject   150e-6\n}\n'})}),"\n",(0,s.jsx)(i.p,{children:"Key fields:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"event"})})," \u2014 The trigger event code to epoch on."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsxs)(i.strong,{children:[(0,s.jsx)(i.code,{children:"tmin"})," / ",(0,s.jsx)(i.code,{children:"tmax"})]})," \u2014 Epoch boundaries relative to the event (seconds)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsxs)(i.strong,{children:[(0,s.jsx)(i.code,{children:"basemin"})," / ",(0,s.jsx)(i.code,{children:"basemax"})]})," \u2014 Baseline correction interval (seconds)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsxs)(i.strong,{children:[(0,s.jsx)(i.code,{children:"gradReject"})," / ",(0,s.jsx)(i.code,{children:"magReject"})," / ",(0,s.jsx)(i.code,{children:"eegReject"})," / ",(0,s.jsx)(i.code,{children:"eogReject"})]})," \u2014 Peak-to-peak artifact rejection thresholds."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["For detailed format documentation, see the ",(0,s.jsx)(i.a,{href:"https://mne.tools/mne-c-manual/browse_raw.html",children:"MNE-C manual"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"description-files-for-covariance-estimation",children:"Description Files for Covariance Estimation"}),"\n",(0,s.jsxs)(i.p,{children:["The covariance description file (",(0,s.jsx)(i.code,{children:".cov"}),") specifies the time window and event-based epochs from which the noise-covariance matrix is estimated:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:'cov {\n    name        "Noise Covariance"\n    event       1\n    tmin        -0.2\n    tmax        0.0\n    basemin     -0.2\n    basemax     0.0\n    gradReject  3000e-13\n    magReject   4000e-15\n    eegReject   150e-6\n}\n'})}),"\n",(0,s.jsxs)(i.p,{children:["The noise-covariance matrix is a critical input for inverse modeling. For background on how it is used, see ",(0,s.jsx)(i.a,{href:"inverse",children:"The Minimum-Norm Estimates"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"signal-space-projection-ssp",children:"Signal-Space Projection (SSP)"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"--makeproj"})," option computes new SSP operators from the raw data. This is typically done using ",(0,s.jsx)(i.strong,{children:"empty-room data"})," (recorded without a subject) to characterize environmental noise patterns."]}),"\n",(0,s.jsx)(i.p,{children:"The SSP algorithm:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Selects epochs around the specified event code (",(0,s.jsx)(i.code,{children:"--projevent"}),")"]}),"\n",(0,s.jsx)(i.li,{children:"Computes the covariance matrix of these epochs"}),"\n",(0,s.jsx)(i.li,{children:"Extracts the leading eigenvectors as the noise subspace basis"}),"\n",(0,s.jsx)(i.li,{children:"Saves the resulting projection operator"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Separate components are computed for gradiometers (",(0,s.jsx)(i.code,{children:"--projngrad"}),"), magnetometers (",(0,s.jsx)(i.code,{children:"--projnmag"}),"), and EEG channels (",(0,s.jsx)(i.code,{children:"--projneeg"}),"). Rejection thresholds (",(0,s.jsx)(i.code,{children:"--projgradrej"}),", ",(0,s.jsx)(i.code,{children:"--projmagrej"}),", ",(0,s.jsx)(i.code,{children:"--projeegrej"}),") exclude noisy epochs from the computation."]}),"\n",(0,s.jsxs)(i.p,{children:["For the mathematical background on SSP, see ",(0,s.jsx)(i.a,{href:"ssp",children:"Signal-Space Projection"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"filtering-and-decimation",children:"Filtering and Decimation"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"mne_process_raw"})," applies an FFT-based FIR filter to the data before saving. The filter is specified by high-pass and low-pass corner frequencies and their transition bandwidths."]}),"\n",(0,s.jsx)(i.admonition,{type:"important",children:(0,s.jsx)(i.p,{children:"When decimating, the output sampling frequency must be at least three times the low-pass filter corner frequency to satisfy the Nyquist criterion and avoid aliasing."})}),"\n",(0,s.jsx)(i.h3,{id:"grand-averaging",children:"Grand Averaging"}),"\n",(0,s.jsxs)(i.p,{children:["When multiple raw data files are specified with ",(0,s.jsx)(i.code,{children:"--raw"}),", the tool can compute grand averages and grand covariance matrices across all files. This is useful for group-level analyses:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"--gave <file>"})})," \u2014 After computing per-file averages (driven by ",(0,s.jsx)(i.code,{children:"--ave"}),"), combine them into a single grand-average evoked file."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"--gcov <file>"})})," \u2014 After computing per-file covariance matrices (driven by ",(0,s.jsx)(i.code,{children:"--cov"}),"), combine them into a single grand covariance matrix."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(i.h3,{id:"detect-events-and-save-them",children:"Detect events and save them"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw sample_audvis_raw.fif \\\n    --eventsout sample_audvis_raw-eve.fif\n"})}),"\n",(0,s.jsx)(i.h3,{id:"band-pass-filter-and-decimate",children:"Band-pass filter and decimate"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw sample_audvis_raw.fif \\\n    --highpass 1 --lowpass 40 \\\n    --decim 4 \\\n    --save sample_audvis_filtered_raw.fif\n"})}),"\n",(0,s.jsx)(i.h3,{id:"compute-averages-from-a-description-file",children:"Compute averages from a description file"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw sample_audvis_raw.fif \\\n    --ave auditory.ave\n"})}),"\n",(0,s.jsx)(i.h3,{id:"compute-noise-covariance-from-pre-stimulus-baselines",children:"Compute noise covariance from pre-stimulus baselines"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw sample_audvis_raw.fif \\\n    --cov noise.cov\n"})}),"\n",(0,s.jsx)(i.h3,{id:"full-pipeline-with-ssp-filtering-and-averaging",children:"Full pipeline with SSP, filtering, and averaging"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw sample_audvis_raw.fif \\\n    --proj ssp_audvis.fif --projon \\\n    --highpass 0.1 --lowpass 40 \\\n    --ave auditory.ave \\\n    --cov noise.cov\n"})}),"\n",(0,s.jsx)(i.h3,{id:"grand-average-across-multiple-subjects",children:"Grand average across multiple subjects"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw \\\n    --raw subj01_audvis_raw.fif \\\n    --raw subj02_audvis_raw.fif \\\n    --raw subj03_audvis_raw.fif \\\n    --ave paradigm.ave \\\n    --gave grand_average-ave.fif\n"})}),"\n",(0,s.jsx)(i.h3,{id:"create-ssp-operators-from-empty-room-data",children:"Create SSP operators from empty-room data"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw empty_room.fif \\\n    --makeproj \\\n    --projngrad 3 --projnmag 3 \\\n    --saveprojtag _emptyroom\n"})}),"\n",(0,s.jsx)(i.h3,{id:"save-filtered-data-with-anonymization",children:"Save filtered data with anonymization"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"mne_process_raw --raw patient_data.fif \\\n    --highpass 1 --lowpass 100 \\\n    --save filtered_anon.fif --anon\n"})}),"\n",(0,s.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"ssp",children:"Signal-Space Projection (SSP)"})," \u2014 Mathematical background on the SSP method"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"inverse",children:"The Minimum-Norm Estimates"})," \u2014 How the noise-covariance matrix is used in source estimation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"tools-compute-raw-inverse",children:"mne_compute_raw_inverse"})," \u2014 Compute inverse solutions from the averaged data"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"tools-forward-solution",children:"mne_forward_solution"})," \u2014 Compute the forward model needed for source estimation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"tools-dipole-fit",children:"mne_dipole_fit"})," \u2014 Fit equivalent current dipoles to averaged data"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"workflow",children:"The Typical Workflow"})," \u2014 Where ",(0,s.jsx)(i.code,{children:"mne_process_raw"})," fits in the overall MEG/EEG analysis pipeline"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453(e,i,n){n.d(i,{R:()=>d,x:()=>a});var r=n(96540);const s={},t=r.createContext(s);function d(e){const i=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);