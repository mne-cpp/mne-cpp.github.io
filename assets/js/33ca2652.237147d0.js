"use strict";(globalThis.webpackChunkmne_cpp_website=globalThis.webpackChunkmne_cpp_website||[]).push([[5164],{93186(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"development/ci-deployment","title":"Deployment","description":"This page explains how MNE-CPP handles deployment on Windows, Linux, and macOS. Deployment bundles the required Qt runtime libraries with the compiled applications so they can run outside of a development environment.","source":"@site/docs/development/ci-deployment.mdx","sourceDirName":"development","slug":"/development/ci-deployment","permalink":"/docs/development/ci-deployment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Deployment","sidebar_label":"Deployment"},"sidebar":"developmentSidebar","previous":{"title":"Github Actions","permalink":"/docs/development/ci-ghactions"},"next":{"title":"Release Guide","permalink":"/docs/development/ci-releasecycle"}}');var i=l(74848),d=l(28453);const t={title:"Deployment",sidebar_label:"Deployment"},o="Deployment",c={},r=[{value:"Build Rules",id:"build-rules",level:2},{value:"Dependency Solving",id:"dependency-solving",level:2},{value:"Windows",id:"windows",level:3},{value:"Linux",id:"linux",level:3},{value:"macOS",id:"macos",level:3},{value:"Static Builds",id:"static-builds",level:2},{value:"Deployment Scripts",id:"deployment-scripts",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deployment",children:"Deployment"})}),"\n",(0,i.jsx)(n.p,{children:"This page explains how MNE-CPP handles deployment on Windows, Linux, and macOS. Deployment bundles the required Qt runtime libraries with the compiled applications so they can run outside of a development environment."}),"\n",(0,i.jsx)(n.h2,{id:"build-rules",children:"Build Rules"}),"\n",(0,i.jsxs)(n.p,{children:["All MNE-CPP libraries are built to the ",(0,i.jsx)(n.code,{children:"mne-cpp/lib"})," folder. All applications, test, and examples are built to the ",(0,i.jsx)(n.code,{children:"mne-cpp/out/Release"})," folder."]}),"\n",(0,i.jsx)(n.h2,{id:"dependency-solving",children:"Dependency Solving"}),"\n",(0,i.jsxs)(n.p,{children:["MNE-CPP depends on ",(0,i.jsx)(n.a,{href:"https://www.qt.io/",children:"Qt"})," and ",(0,i.jsx)(n.a,{href:"http://eigen.tuxfamily.org/index.php?title=Main_Page",children:"Eigen"}),". Eigen, as a lightweight template library, ",(0,i.jsx)(n.a,{href:"https://github.com/mne-tools/mne-cpp/tree/main/include/3rdParty/eigen3",children:"is included in the MNE-CPP repository by default"})," and does not need further dependency solving. For Qt dependencies we use Qt specific deployment tools (",(0,i.jsx)(n.code,{children:"windeployqt"}),", ",(0,i.jsx)(n.code,{children:"linuxdeployqt"}),", ",(0,i.jsx)(n.code,{children:"macdeployqt"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"windows",children:"Windows"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"WinDynamic"})," workflow in ",(0,i.jsx)(n.a,{href:"https://github.com/mne-tools/mne-cpp/blob/main/.github/workflows/release.yml",children:"release.yml"})," excludes examples and tests. MNE-CPP libraries are copied to both ",(0,i.jsx)(n.code,{children:"mne-cpp/lib"})," and ",(0,i.jsx)(n.code,{children:"mne-cpp/out/Release"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Dependency resolution uses ",(0,i.jsx)(n.code,{children:"windeployqt"})," (maintained by Qt), called from ",(0,i.jsx)(n.a,{href:"https://github.com/mne-tools/mne-cpp/blob/main/tools/deploy.bat",children:"deploy.bat"})," with ",(0,i.jsx)(n.code,{children:"dynamic"})," as the first argument. It runs against:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The MNE Scan ",(0,i.jsx)(n.code,{children:".exe"})," (covers all application-level Qt modules)"]}),"\n",(0,i.jsxs)(n.li,{children:["The Disp3D ",(0,i.jsx)(n.code,{children:".dll"})," (the highest-level library, linking all needed Qt modules)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Afterward, Qt and system libraries reside in ",(0,i.jsx)(n.code,{children:"mne-cpp/out/Release"}),". The test data folder is deleted, and the output is compressed to a ",(0,i.jsx)(n.code,{children:".zip"})," file and uploaded as a release asset."]}),"\n",(0,i.jsx)(n.h3,{id:"linux",children:"Linux"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"LinuxDynamic"})," workflow in ",(0,i.jsx)(n.a,{href:"https://github.com/mne-tools/mne-cpp/blob/main/.github/workflows/release.yml",children:"release.yml"})," excludes examples and tests. CMake configures the ",(0,i.jsx)(n.code,{children:"RPATH"})," to link against libraries in ",(0,i.jsx)(n.code,{children:"mne-cpp/lib"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Dependency resolution uses ",(0,i.jsx)(n.a,{href:"https://github.com/probonopd/linuxdeployqt",children:"linuxdeployqt"}),", called from the deployment script under ",(0,i.jsx)(n.code,{children:"tools/deployment"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The test data folder is deleted, and the folders ",(0,i.jsx)(n.code,{children:"out/Release/apps"}),", ",(0,i.jsx)(n.code,{children:"out/Release/lib"}),", ",(0,i.jsx)(n.code,{children:"out/Release/plugins"}),", and ",(0,i.jsx)(n.code,{children:"out/Release/translations"})," are compressed to a ",(0,i.jsx)(n.code,{children:".tar.gz"})," file and uploaded as a release asset."]}),"\n",(0,i.jsx)(n.h3,{id:"macos",children:"macOS"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"MacOSDynamic"})," workflow in ",(0,i.jsx)(n.a,{href:"https://github.com/mne-tools/mne-cpp/blob/main/.github/workflows/release.yml",children:"release.yml"})," excludes examples and tests. All applications are built as ",(0,i.jsx)(n.code,{children:".app"})," bundles."]}),"\n",(0,i.jsxs)(n.p,{children:["Dependency resolution uses ",(0,i.jsx)(n.code,{children:"macdeployqt"})," (maintained by Qt). MNE-CPP libraries are manually copied to each app's ",(0,i.jsx)(n.code,{children:"Contents/Frameworks"})," folder, and resources and plugin folders are copied to the corresponding ",(0,i.jsx)(n.code,{children:".app"})," directories."]}),"\n",(0,i.jsxs)(n.p,{children:["Before packaging, standalone plugin folders (",(0,i.jsx)(n.code,{children:"mne_scan_plugins"}),", ",(0,i.jsx)(n.code,{children:"mne_analyze_plugins"}),", ",(0,i.jsx)(n.code,{children:"mne_rt_server_plugins"}),") and the ",(0,i.jsx)(n.code,{children:"resources"})," symlink are deleted. The ",(0,i.jsx)(n.code,{children:"out/Release"})," folder is compressed to a ",(0,i.jsx)(n.code,{children:".tar.gz"})," file and uploaded as a release asset."]}),"\n",(0,i.jsx)(n.h2,{id:"static-builds",children:"Static Builds"}),"\n",(0,i.jsxs)(n.p,{children:["The information above corresponds to deploying the dynamically built version of MNE-CPP. In case of static deployment the process differs slightly. See the deployment scripts in ",(0,i.jsx)(n.code,{children:"tools/deployment"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"deployment-scripts",children:"Deployment Scripts"}),"\n",(0,i.jsxs)(n.p,{children:["The deployment scripts live in ",(0,i.jsx)(n.code,{children:"tools/deployment"}),". Platform-specific scripts (",(0,i.jsx)(n.code,{children:"deploy.bat"})," for Windows, ",(0,i.jsx)(n.code,{children:"deploy.sh"})," for Linux/macOS) handle dependency resolution and packaging."]}),"\n",(0,i.jsx)(n.p,{children:"Each script accepts two arguments:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Linkage type"}),": ",(0,i.jsx)(n.code,{children:"dynamic"})," (default) or ",(0,i.jsx)(n.code,{children:"static"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packaging"}),": Pass ",(0,i.jsx)(n.code,{children:"pack"})," as the second argument to generate a compressed archive (",(0,i.jsx)(n.code,{children:".zip"})," or ",(0,i.jsx)(n.code,{children:".tar.gz"}),") containing all binaries and required libraries."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["During development, running the deployment script with just the ",(0,i.jsx)(n.code,{children:"dynamic"})," argument is useful to resolve Qt dependencies for a particular MNE-CPP application without creating a full package."]}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Resolve Qt dependencies for development (no archive)\n./tools/deploy.bat dynamic\n\n# Create a distributable archive\n./tools/deploy.bat dynamic pack\n"})})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453(e,n,l){l.d(n,{R:()=>t,x:()=>o});var s=l(96540);const i={},d=s.createContext(i);function t(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);