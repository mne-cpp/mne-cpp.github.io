"use strict";(globalThis.webpackChunkmne_cpp_website=globalThis.webpackChunkmne_cpp_website||[]).push([[4094],{82552(e,s,r){r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"manual/tools-surf2bem","title":"mne_surf2bem","description":"Overview","source":"@site/docs/manual/tools-surf2bem.mdx","sourceDirName":"manual","slug":"/manual/tools-surf2bem","permalink":"/docs/manual/tools-surf2bem","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"mne_surf2bem","sidebar_label":"mne_surf2bem","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"mne_flash_bem","permalink":"/docs/manual/tools-flash-bem"},"next":{"title":"mne_setup_forward_model","permalink":"/docs/manual/tools-setup-forward-model"}}');var i=r(74848),l=r(28453);const t={title:"mne_surf2bem",sidebar_label:"mne_surf2bem",sidebar_position:3},d="mne_surf2bem",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Description",id:"description",level:2},{value:"Surface IDs",id:"surface-ids",level:3},{value:"Topology Checks",id:"topology-checks",level:3},{value:"Example",id:"example",level:2}];function a(e){const s={annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"mne_surf2bem",children:"mne_surf2bem"})}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"mne_surf2bem"})," converts FreeSurfer surfaces and/or ASCII triangle files into BEM FIFF files. It supports multiple surface inputs with separate IDs and conductivities, vertex shifting along normals, surface reordering, and topology checks."]}),"\n",(0,i.jsx)(s.p,{children:"This is a C++ port of the original MNE-C tool by Matti H\xe4m\xe4l\xe4inen."}),"\n",(0,i.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mne_surf2bem [options]\n"})}),"\n",(0,i.jsx)(s.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Option"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--surf <name>"})}),(0,i.jsx)(s.td,{children:"Input FreeSurfer binary surface file"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--tri <name>"})}),(0,i.jsx)(s.td,{children:"Input ASCII triangle file"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--fif <name>"})}),(0,i.jsx)(s.td,{children:"Output FIFF BEM surface file"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--id <id>"})}),(0,i.jsxs)(s.td,{children:["BEM surface ID: 1 = brain, 3 = skull, 4 = head. Applies to the last ",(0,i.jsx)(s.code,{children:"--surf"})," or ",(0,i.jsx)(s.code,{children:"--tri"})," specified."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--swap"})}),(0,i.jsx)(s.td,{children:"Swap vertex winding order (for ASCII files)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--meters"})}),(0,i.jsx)(s.td,{children:"Coordinates are in meters (default: millimeters)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--coordf <no>"})}),(0,i.jsx)(s.td,{children:"Coordinate frame for ASCII vertices"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--shift <val>"})}),(0,i.jsx)(s.td,{children:"Shift vertices along normals by specified amount (mm)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--ico <number>"})}),(0,i.jsx)(s.td,{children:"Downsample to icosahedron subdivision level (0\u20136)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--sigma <val>"})}),(0,i.jsx)(s.td,{children:"Compartment conductivity (S/m)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--force"})}),(0,i.jsx)(s.td,{children:"Load the surface despite topological defects"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--check"})}),(0,i.jsx)(s.td,{children:"Perform topology and solid angle checks"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--checkmore"})}),(0,i.jsx)(s.td,{children:"Also check skull/skin thicknesses"})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"mne_surf2bem"})," is used to convert surfaces from FreeSurfer binary format or ASCII triangle format into the FIFF BEM format required by the MNE forward solution computation. Multiple surfaces can be combined into a single BEM file by specifying multiple ",(0,i.jsx)(s.code,{children:"--surf"})," or ",(0,i.jsx)(s.code,{children:"--tri"})," options with corresponding ",(0,i.jsx)(s.code,{children:"--id"})," values."]}),"\n",(0,i.jsx)(s.h3,{id:"surface-ids",children:"Surface IDs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"ID"}),(0,i.jsx)(s.th,{children:"Surface"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Brain (inner skull)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"Skull (outer skull)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"4"}),(0,i.jsx)(s.td,{children:"Head (scalp)"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"topology-checks",children:"Topology Checks"}),"\n",(0,i.jsxs)(s.p,{children:["When ",(0,i.jsx)(s.code,{children:"--check"})," is specified, the following checks are performed:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Completeness"})," \u2014 The total solid angle subtended by all triangles should be close to ",(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsxs)(s.mrow,{children:[(0,i.jsx)(s.mn,{children:"4"}),(0,i.jsx)(s.mi,{children:"\u03c0"})]}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"4\\pi"})]})})}),(0,i.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,i.jsx)(s.span,{className:"mord",children:"4"}),(0,i.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"\u03c0"})]})})]})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Surface ordering"})," \u2014 Surfaces are verified to be properly nested (inner skull inside outer skull inside scalp)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Extent"})," \u2014 Surface extent must be at least 50 mm (to detect meters/millimeters confusion)"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(s.p,{children:"Convert a FreeSurfer inner skull surface to BEM format:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mne_surf2bem --surf inner_skull.surf --id 1 --fif inner_skull-bem.fif --check\n"})}),"\n",(0,i.jsx)(s.p,{children:"Create a three-layer BEM from FreeSurfer surfaces:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mne_surf2bem \\\n    --surf inner_skull.surf --id 1 --sigma 0.3 \\\n    --surf outer_skull.surf --id 3 --sigma 0.006 \\\n    --surf outer_skin.surf --id 4 --sigma 0.3 \\\n    --fif three-layer-bem.fif --check\n"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453(e,s,r){r.d(s,{R:()=>t,x:()=>d});var n=r(96540);const i={},l=n.createContext(i);function t(e){const s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);