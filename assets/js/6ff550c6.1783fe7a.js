"use strict";(globalThis.webpackChunkmne_cpp_website=globalThis.webpackChunkmne_cpp_website||[]).push([[1360],{72961(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"manual/tools-forward-solution","title":"mne_forward_solution","description":"Overview","source":"@site/docs/manual/tools-forward-solution.mdx","sourceDirName":"manual","slug":"/manual/tools-forward-solution","permalink":"/docs/manual/tools-forward-solution","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"mne_forward_solution","sidebar_label":"mne_forward_solution","sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"mne_setup_mri","permalink":"/docs/manual/tools-setup-mri"},"next":{"title":"mne_make_source_space","permalink":"/docs/manual/tools-make-source-space"}}');var o=s(74848),i=s(28453);const t={title:"mne_forward_solution",sidebar_label:"mne_forward_solution",sidebar_position:6},l="mne_forward_solution",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Description",id:"description",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"BEM vs. Sphere Model",id:"bem-vs-sphere-model",level:3},{value:"Software Gradient Compensation",id:"software-gradient-compensation",level:3},{value:"Example",id:"example",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"mne_forward_solution",children:"mne_forward_solution"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"mne_forward_solution"})," computes the MEG/EEG forward solution for source localization. It calculates the magnetic fields and electric potentials at the measurement sensors and electrodes due to dipole sources located on the cortex or in a volume source space."]}),"\n",(0,o.jsx)(n.p,{children:"This is a C++ port of the original MNE-C tool by Matti H\xe4m\xe4l\xe4inen."}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mne_forward_solution [options]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,o.jsxs)(n.p,{children:["The command-line options are defined by the ",(0,o.jsx)(n.code,{children:"ComputeFwdSettings"})," class and follow the standard MNE-C forward solution options. Key options include:"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--src <file>"})}),(0,o.jsx)(n.td,{children:"Source space file"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--bem <file>"})}),(0,o.jsx)(n.td,{children:"BEM model file"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--meas <file>"})}),(0,o.jsx)(n.td,{children:"Measurement data file (for sensor info)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--fwd <file>"})}),(0,o.jsx)(n.td,{children:"Output forward solution file"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--trans <file>"})}),(0,o.jsx)(n.td,{children:"Head-MRI coordinate transform file"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--meg"})}),(0,o.jsx)(n.td,{children:"Compute MEG forward solution"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--eeg"})}),(0,o.jsx)(n.td,{children:"Compute EEG forward solution"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--mindist <dist>"})}),(0,o.jsx)(n.td,{children:"Minimum source-to-inner-skull distance (mm)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--accurate"})}),(0,o.jsx)(n.td,{children:"Use accurate coil geometry descriptions"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--fixed"})}),(0,o.jsx)(n.td,{children:"Fixed source orientations (normal to cortex)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--all"})}),(0,o.jsx)(n.td,{children:"Compute for all source space points"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,o.jsx)(n.p,{children:"The forward solution is a critical component of the MEG/EEG source localization pipeline. It maps the relationship between source currents on the cortex (or in the volume) and the measured signals at the MEG sensors and EEG electrodes."}),"\n",(0,o.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before computing the forward solution, the following must be available:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Source space"})," \u2014 Created from FreeSurfer surface reconstruction"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"BEM model"})," \u2014 Created using ",(0,o.jsx)(n.code,{children:"mne_watershed_bem"})," or ",(0,o.jsx)(n.code,{children:"mne_flash_bem"}),", then set up with ",(0,o.jsx)(n.code,{children:"mne_setup_forward_model"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Coordinate transformation"})," \u2014 The head-to-MRI transform stored in a ",(0,o.jsx)(n.code,{children:"-trans.fif"})," file"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Measurement info"})," \u2014 A FIFF file containing sensor locations and orientations"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"bem-vs-sphere-model",children:"BEM vs. Sphere Model"}),"\n",(0,o.jsx)(n.p,{children:"The forward solution can be computed using either:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"BEM (Boundary Element Model)"})," \u2014 More accurate, requires BEM surfaces"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Sphere model"})," \u2014 Simpler, uses concentric sphere approximation"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"software-gradient-compensation",children:"Software Gradient Compensation"}),"\n",(0,o.jsx)(n.p,{children:"For CTF and 4D Neuroimaging data that has been subjected to software gradient compensation, the forward solution automatically accounts for the reference sensor array and computes a compensated forward solution."}),"\n",(0,o.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(n.p,{children:"Compute a MEG forward solution:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mne_forward_solution \\\n    --src sample-oct6-src.fif \\\n    --bem sample-5120-5120-5120-bem-sol.fif \\\n    --meas sample_audvis_raw.fif \\\n    --trans sample-trans.fif \\\n    --meg \\\n    --fwd sample-meg-fwd.fif\n"})}),"\n",(0,o.jsx)(n.p,{children:"Compute a combined MEG+EEG forward solution with accurate coil descriptions:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mne_forward_solution \\\n    --src sample-oct6-src.fif \\\n    --bem sample-5120-5120-5120-bem-sol.fif \\\n    --meas sample_audvis_raw.fif \\\n    --trans sample-trans.fif \\\n    --meg --eeg --accurate \\\n    --fwd sample-meg-eeg-fwd.fif\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var r=s(96540);const o={},i=r.createContext(o);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);